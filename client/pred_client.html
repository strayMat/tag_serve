<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="custom.css">
</head>

<body>
	<div class="container col-lg-6" style="padding-top: 0.5cm">
		<div style="padding-bottom: 0.5cm">
			<div class="card text-center bg-light">
				<div class="card-body" style="padding-bottom: 0.2cm">
					<input class="card-title form-control" type="text" id="input" name="input" placeholder="Input sentence"/>
					<button class="card-text btn btn-outline-primary" id="btn">Find Entities</button>
					<div class="spinner" id="spinner" style="display: none">
					  <div class="double-bounce1"></div>
					  <div class="double-bounce2"></div>
					</div>
				</div>
				<div class="card-footer bg-white">
					<pre class="card-text api-pre" style="padding-bottom: 0.2cm">
						<div class="item" id="api_input">I love reading Albert Camus .</div>
						<div class="item" id="api_output">O O    O       I-PER  B-PER O</div>
					</pre>
				</div>
			</div>
		</div>
	</div>
</body>



<script type="text/javascript">
	function api_call(input) {
		//hide button and make the spinner appear
		$('#btn').toggle();
		$('#spinner').toggle();

		$.ajax({
			url: "http://0.0.0.0:5000/api",
			method: 'POST',
			contentType: 'application/json',
			data: JSON.stringify(input),

			success: function( data, textStatus, jQxhr ){
				//toggle button and spinner
				$('#btn').toggle();
				$('#spinner').toggle();

				// fill the html for answer
				$('#api_input').html(data.input);
				$('#api_output').html(data.output);

				//$('#input').val("");
			},
			error: function( jqXhr, textStatus, errorThrown ){
				$('#btn').toggle();
				$('#spinner').toggle();

				$('#api_input').html( "Sorry, the server went nuts" );
				$('#api_output').html( "Try again in a moment!" );

				console.log( errorThrown );
			},
			timeout: 3000 // set timeout to 10 seconds
		});
	}


	$( document ).ready(function() {
		// request when clincking on button or typing enter
		$('#btn').click(function() {
			// get the input data
			var input = $("#input").val();
			api_call(input);
			//input = "";
		});
		});

	$( document).keyup(function(event) {
		if (event.keyCode == 13){
			// get the input data
			var input = $("#input").val();
			api_call(input);
			//input = "";
		}

	});

</script>